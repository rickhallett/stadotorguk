---
import Layout from "../../layouts/Layout.astro";
import DataBlock from "../../components/DataBlock.astro";
import BrutalSection from "../../components/BrutalSection.astro";
import ImpactCard from "../../components/ImpactCard.astro";
---

<Layout title="Home">
  <!-- HERO SECTION -->
  <section class="hero">
    <div class="hero-grid">
      {[...Array(9)].map(() => <div class="grid-cell" />)}
    </div>
    <div class="hero-content">
      <h1 class="brutal-headline">SWANAGE<br />LEGAL<br />COALITION</h1>
      <p class="brutal-subhead">CONSTITUTIONAL VIOLATIONS. JUDICIAL REVIEW PENDING.</p>
      <div class="data-block" style="opacity: 1; transform: none;">
        <div class="data-label">£75,000 FRAUDULENT SURVEY</div>
        <div class="data-stat">EVIDENCE DOCUMENTED</div>
      </div>
    </div>
  </section>

  <!-- SCROLL INDICATOR -->
  <div class="scroll-indicator"></div>

  <!-- INTRODUCTION -->
  <section class="story-section fade-in">
    <div class="story-content">
      <div>
        <h2 class="brutal-subhead">THE LEGAL COALITION</h2>
        <p style="font-size: 1.25rem; margin: 2rem 0; line-height: 1.6;">
          The Swanage Legal Coalition represents residents pursuing judicial review against 
          Swanage Town Council. We are documenting systematic procedural violations, 
          breach of statutory consultation obligations, and constitutional failures that 
          demand legal remedy through the courts.
        </p>
        <div class="pull-quote">
          "Due process denied. Democratic rights violated. Justice will prevail."
        </div>
      </div>
      <DataBlock
        label="LEGAL COMPLAINANTS"
        stat="1,247"
        description="Claimants ready for judicial review"
      />
    </div>
  </section>

  <!-- TRAFFIC SURGE -->
  <BrutalSection title="THE £75,000 FRAUDULENT CONSULTATION">
    <div class="chart-container">
      <h3 class="brutal-subhead">EXHIBIT A: PROCEDURAL VIOLATIONS</h3>
      <div class="bar-chart">
        <div class="bar" style="height: 30%;" data-value="387">
          <span class="bar-value">387</span>
          <span class="bar-label">Total Survey Responses</span>
        </div>
        <div class="bar" style="height: 60%;" data-value="71%">
          <span class="bar-value">71%</span>
          <span class="bar-label">Non-Resident Responses</span>
        </div>
        <div class="bar" style="height: 90%;" data-value="10,000+">
          <span class="bar-value">10,000+</span>
          <span class="bar-label">Residents Disenfranchised</span>
        </div>
      </div>
    </div>
    <div class="brutal-info-block">
      <h3 class="brutal-subhead">CONSTITUTIONAL BREACHES DOCUMENTED</h3>
      <ul style="font-size: 1.25rem; margin-top: 1rem; list-style: none;">
        <li style="margin-bottom: 1rem;">
          ▪ Breach of s.111 Local Government Act 1972
        </li>
        <li style="margin-bottom: 1rem;">
          ▪ Violation of Gunning Principles on consultation
        </li>
        <li style="margin-bottom: 1rem;">
          ▪ Unlawful use of Standing Orders to silence dissent
        </li>
        <li>▪ Breach of fiduciary duty to residents</li>
      </ul>
    </div>
  </BrutalSection>

  <!-- IMPACT ANALYSIS -->
  <BrutalSection title="LEGAL IMPACT ASSESSMENT">
    <div class="impact-grid">
      <ImpactCard
        stat="15min"
        description="Emergency response times violating statutory duties"
      />
      <ImpactCard
        stat="£75,000"
        description="Public funds misappropriated for flawed process"
      />
      <ImpactCard stat="78%" description="Residents denied statutory consultation rights" />
      <ImpactCard
        stat="3"
        description="Formal complaints filed with UK Statistics Authority"
      />
    </div>
  </BrutalSection>

  <!-- PARKING CRISIS -->
  <BrutalSection title="THE CASE FOR JUDICIAL REVIEW">
    <div class="evidence-grid">
      <div class="evidence-card">
        <div class="evidence-number">1</div>
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">
          PROCEDURAL IMPROPRIETY
        </h3>
        <div class="data-stat" style="font-size: 3rem;">PROVEN</div>
        <p style="margin-top: 1rem;">Survey conducted without proper consultation framework</p>
      </div>
      <div class="evidence-card">
        <div class="evidence-number">2</div>
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">WEDNESBURY UNREASONABLENESS</h3>
        <div class="data-stat" style="font-size: 3rem;">ESTABLISHED</div>
        <p style="margin-top: 1rem;">
          No reasonable authority would base £75,000 decision on tourist responses
        </p>
      </div>
      <div class="evidence-card">
        <div class="evidence-number">3</div>
        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">
          LEGITIMATE EXPECTATION
        </h3>
        <div class="data-stat" style="font-size: 3rem;">BREACHED</div>
        <p style="margin-top: 1rem;">
          Residents had legitimate expectation of genuine consultation process
        </p>
      </div>
    </div>
  </BrutalSection>

  <!-- CALL TO ACTION -->
  <BrutalSection>
    <h2
      class="brutal-headline"
      style="font-size: clamp(3rem, 8vw, 5rem); text-align: center;"
    >
      <span></span><br />JOIN THE LEGAL ACTION
    </h2>

    <div class="action-form">
      <form id="contactForm">
        <div class="form-group">
          <label for="name">FULL LEGAL NAME</label>
          <input type="text" id="name" name="name" required />
        </div>
        <div class="form-group">
          <label for="email">EMAIL ADDRESS</label>
          <input type="email" id="email" name="email" required />
        </div>
        <div class="form-group">
          <label for="postcode">RESIDENTIAL POSTCODE</label>
          <input type="text" id="postcode" name="postcode" required />
        </div>
        <div class="form-group">
          <label for="message">EVIDENCE TO SUBMIT (OPTIONAL)</label>
          <textarea id="message" name="message" rows="4"></textarea>
        </div>
        <button type="submit" class="submit-btn"> SUBMIT EVIDENCE </button>
      </form>
      <div
        class="form-confirmation"
        id="formConfirmation"
        style="display: none;"
      >
        CONFIRMED: EVIDENCE SUBMITTED. LEGAL ACTION PROCEEDING.
      </div>
    </div>
  </BrutalSection>
</Layout>

<style>
  /* HERO SECTION */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: var(--brutal-black);
    color: var(--brutal-white);
    padding: 2rem;
    position: relative;
    overflow: hidden;
  }

  .hero-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    position: absolute;
    inset: 0;
    opacity: 0.1;
  }

  .grid-cell {
    background: var(--brutal-white);
    border: 1px solid var(--brutal-white);
  }

  .hero-content {
    position: relative;
    z-index: 10;
    max-width: 1400px;
    margin: 0 auto;
  }

  .hero .brutal-headline {
    margin-bottom: 2rem;
    animation: slideInBrutal 1s ease-out forwards;
  }

  /* STORY SECTIONS */
  .story-section {
    min-height: 50vh;
    display: flex;
    align-items: center;
    padding: 4rem 2rem;
  }

  .story-content {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
  }

  /* CHARTS */
  .chart-container {
    margin: 2rem 0;
  }

  .bar-chart {
    display: flex;
    align-items: flex-end;
    height: 300px;
    gap: 1rem;
    padding: 3rem;
    background: var(--brutal-white);
    border: 4px solid var(--brutal-black);
    margin-top: 1rem;
  }

  .bar {
    flex: 1;
    background: var(--brutal-gray); /* Green for positive growth */
    position: relative;
    transition: all 0.8s ease-out;
  }

  .bar-label {
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.875rem;
    white-space: nowrap;
  }

  .bar-value {
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    font-weight: 900;
    font-size: 1.25rem;
  }

  /* BRUTAL INFO BLOCK */
  .brutal-info-block {
    background: var(--brutal-concrete);
    border: 4px solid var(--brutal-black);
    padding: 2rem;
    margin: 2rem 0;
  }

  .brutal-info-block h3 {
    margin-bottom: 1rem;
  }

  /* IMPACT GRID */
  .impact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
  }

  /* EVIDENCE CARDS */
  .evidence-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
  }

  .evidence-card {
    background: var(--brutal-concrete);
    border: 4px solid var(--brutal-black);
    padding: 2rem;
    position: relative;
    overflow: hidden;
  }

  .evidence-number {
    position: absolute;
    top: -20px;
    right: 20px;
    font-size: 6rem;
    font-weight: 900;
    color: #ffd700; /* Golden yellow */
    opacity: 0.2;
  }

  /* SCROLL INDICATOR */
  .scroll-indicator {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 60px;
    border: 4px solid var(--brutal-black);
    background: var(--brutal-white);
    opacity: 0.8;
    animation: bounce 2s infinite;
    z-index: 50;
  }

  .scroll-indicator::before {
    content: "";
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 8px;
    background: var(--brutal-black);
    animation: scrollDot 2s infinite;
  }

  @keyframes bounce {
    0%,
    100% {
      transform: translateX(-50%) translateY(0);
    }
    50% {
      transform: translateX(-50%) translateY(10px);
    }
  }

  @keyframes scrollDot {
    0% {
      top: 10px;
    }
    50% {
      top: 30px;
    }
    100% {
      top: 10px;
    }
  }

  .form-confirmation {
    background: var(--brutal-gray); /* Green for success */
    color: var(--brutal-white);
    padding: 2rem;
    text-align: center;
    font-weight: 900;
    font-size: 1.5rem;
    text-transform: uppercase;
    margin-top: 2rem;
  }

  @media (max-width: 768px) {
    .story-content {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .bar-chart {
      height: 200px;
    }
  }
</style>

<script>
  // Form handling
  document
    .getElementById("contactForm")
    ?.addEventListener("submit", function (e) {
      e.preventDefault();

      const formData = {
        name: (document.getElementById("name") as HTMLInputElement).value,
        email: (document.getElementById("email") as HTMLInputElement).value,
        postcode: (document.getElementById("postcode") as HTMLInputElement)
          .value,
        message: (document.getElementById("message") as HTMLTextAreaElement)
          .value,
        timestamp: new Date().toISOString(),
      };

      // Show confirmation
      const confirmation = document.getElementById("formConfirmation");
      if (confirmation) {
        confirmation.style.display = "block";
      }

      // Reset form
      (this as HTMLFormElement).reset();

      // Log for demo
      console.log("Legal Complainant Registered:", formData);

      // Hide confirmation after 5 seconds
      setTimeout(() => {
        if (confirmation) {
          confirmation.style.display = "none";
        }
      }, 5000);
    });

  // Hide scroll indicator on scroll
  window.addEventListener("scroll", () => {
    const indicator = document.querySelector(
      ".scroll-indicator"
    ) as HTMLElement;
    if (indicator) {
      if (window.scrollY > 100) {
        indicator.style.opacity = "0";
      } else {
        indicator.style.opacity = "0.8";
      }
    }
  });

  // Parallax effect for hero grid
  window.addEventListener("scroll", () => {
    const scrolled = window.pageYOffset;
    const grid = document.querySelector(".hero-grid") as HTMLElement;
    if (grid) {
      grid.style.transform = `translateY(${scrolled * 0.5}px)`;
    }
  });
</script>